\chapter{Results}\label{results}
	This chapter discusses the performance and the limits of the two developed algorithms.
	
		\section{BubbleProfiles}\label{result_profiles}
			
			After training for 14 epochs, the testing accuracy converged to 96.8\%, which is a very good result for a binary classifier. 

			For validation, 20 more manually annotated small images were used, each containing from 10 to 20 bubbles. Figure \ref{fig:bubbleNet_result} illustrates the performance of algorithm \ref{algo:bubbleNet}.  
			The algorithm achieved mAP@.5IoU = 91.5\% and mAP@.3IoU = 93\%. Note that this is slightly worse than the classification accuracy result. This is due to the occasionally unprecise radius computation, which gets penalized by the mAP@p-IoU criterion. 
			
			In figure \ref{bubb_dist_1}, algorithm \ref{algo:bubbleNet} was applied to an image from the validation data set to produce a bubble distribution. Since the bubble radii were determined with a subpixel accuracy, bubble distributions are represented as a histogram with a bin size of $9 \, \mu m$. It can be observed that most bubbles have a size between $300 \, \mu m$ and $480 \mu m$. According to the technical specifications of the bubble generator, bubble radii between $100 \, \mu m$ and $400 \, \mu$ are expected. 
			
			\begin{figure}[h!]
				\centering
				\includegraphics[scale=0.8]{images/bubbleNet_validation_result.png}
				\caption{Testing of algorithm \ref{algo:bubbleNet}. Red: ground truth, green: predicted. Note how in this image, ground truth annotation was not done perfectly, so IoU results were likely slightly underestimated.}
				\label{fig:bubbleNet_result}
			\end{figure}


				\begin{figure}
					\begin{subfigure}[t]{.4\textwidth}
						\includegraphics[scale=0.6]{graphs/b_val_0.png}
						\caption{Bubble distribution}
						\label{subfig:b_val_0}
					\end{subfigure}\hfill
					\begin{subfigure}[t]{.4\textwidth}
						\includegraphics[scale=0.6]{images/val_1.png}
						\caption{Validation image}
						\label{subfig:val_0}
					\end{subfigure}
					\caption{Applying algorithm \ref{algo:bubbleNet} to a validation image captured with the aquarium setup. Image taken with the aquarium setup at 4\,cm below the water surface. Bubble radius has been calibrated with equation \ref{eq:radius_calib}, and measurement volume was limited to $6.6\, mm \times 9.6 \, mm \times 1\, cm$}
					\label{bubb_dist_1}
				\end{figure}




			\section{BubbleCurves}\label{result_curves}

				Using a validation set of 30 small images, each containing 30 to 40 bubbles, this algorithm achieved mAP@.5IoU = 89.3\%, which is slightly worse than algorithm \ref{algo:bubbleNet}. This is in part due to the high rate of overlap between bubbles, making curvature extraction less precise.. Nevertheless, the algorithm is reliable enough to be usable for bubble detection in high concentration images.					
				
				
%				\begin{figure}
%					\begin{subfigure}[t]{.4\textwidth}
%						\includegraphics[scale=0.6]{graphs/b_val_1.png}
%						\caption{Bubble distribution}
%					\end{subfigure}\hfill%
%					\begin{subfigure}[t]{.4\textwidth}
%						\includegraphics[scale=0.6]{images/val_1.png}
%						\caption{Validation image}
%					\end{subfigure}
%					\label{bubb_dist_2}
%					\caption{Bubble distribution}
%				\end{figure}
				
				
				
				
				
				
				
				
				